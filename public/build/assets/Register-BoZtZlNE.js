import{r,W as S,j as a,c as F}from"./app-t2WNlekb.js";import{G as D}from"./GuestLayout-xa5m4_9h.js";import{P as L}from"./PrimaryButton-DizwkOPU.js";import{I as i}from"./InputError-kOrWXqjV.js";function M({kabkota:u,kecamatan:x,kelurahan:p}){const[m,g]=r.useState(),[c,f]=r.useState(),[h,b]=r.useState(),[E,j]=r.useState(),[k,R]=r.useState(!1),[I,N]=r.useState(0);r.useState(),r.useState(),r.useState();const{data:t,setData:d,post:v,processing:A,errors:n,reset:W}=S({nik:null,nama_pasien:"",jenis_kelamin:"L",tgl_lahir:"",kecamatan:"",kelurahan:"",kabkota:"",alamat:"",no_hp:null}),w="/v2",o=(e,l,s)=>{console.log(s),d(C=>({...C,[e.target.name]:e.target.value})),l=="kecamatan"&&y(s),l=="kelurahan"&&K(s)},_=async e=>{const l=[];u.forEach(s=>{s.kode_parent==e&&l.push(s)}),f(l)},y=async e=>{const l=[];x.forEach(s=>{s.kode_parent==e&&l.push(s)}),b(l)},K=async e=>{const l=[];p.forEach(s=>{s.kode_parent==e&&l.push(s)}),j(l)};r.useEffect(()=>{(async()=>{try{const l=await F.get("http://119.2.50.170/sendpusk/api/migrasi/sip/masterprovinsisatset/");g(l.data),console.log(l.data)}catch(l){console.error("Error fetching data:",l.message)}})()},[]);const P=e=>{e.preventDefault(),console.log(t),v(route("register.store"))};return a.jsx(D,{className:"flex flex-col justify-center items-center",title:"Anjungan Kesehatan Mandiri",children:a.jsxs("section",{className:"w-1/2 flex flex-col justify-start px-2 py-2 gap-4",children:[a.jsx("div",{className:"w-min",children:a.jsxs("a",{href:w,className:"flex flex-row gap-4",children:[a.jsx("i",{className:"fa-solid fa-arrow-left text-black text-4xl"}),a.jsx("p",{className:"text-4xl font-bold",children:"Kembali"})]})}),a.jsxs("div",{className:"w-full border-4 border-green-400 rounded-2xl overflow-hidden px-8 py-8 grid grid-flow-row",children:[a.jsxs("section",{className:"w-full grid grid-rows-2 gap-4 mb-4",children:[a.jsx("header",{className:"w-full",children:a.jsx("h2",{className:"text-6xl font-extrabold",children:"Daftar"})}),a.jsx("caption",{className:"w-full",children:a.jsxs("p",{className:"text-xl italic text-gray-700 text-left border-b-2 border-black pb-1",children:["Isikan NIK, No WA, dan Informasi yang Diperlukan"," ",a.jsx("strong",{children:"Sesuai KTP"})," untuk Mendaftar"]})})]}),a.jsx("section",{className:"w-full",children:a.jsxs("form",{className:"grid grid-cols-6 gap-2",onSubmit:P,children:[a.jsx("label",{htmlFor:"nik",className:"col-span-6 text-xl font-bold",children:"Nomor Induk Kependudukan"}),a.jsx("input",{className:"col-span-6 border-2 border-green-400 rounded-xl text-xl bg-gray-200",type:"number",name:"nik",id:"nik",minLength:16,maxLength:16,placeholder:"Contoh: 357601********03",value:t.nik,onChange:o}),a.jsx(i,{className:"col-span-6",message:n.nik?n.nik:n.match}),a.jsx("label",{htmlFor:"nama_pasien",className:"col-span-6 text-xl font-bold",children:"Nama Lengkap"}),a.jsx("input",{className:"col-span-6 border-2 border-green-400 rounded-xl text-xl bg-gray-200",type:"text",name:"nama_pasien",id:"nama_pasien",placeholder:"Contoh: Ahmad Yani",value:t.nama_pasien,onChange:o}),a.jsx(i,{className:"col-span-6",message:n.nama_pasien}),a.jsxs("div",{className:"col-span-4 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"tgl_lahir",className:"w-full text-xl font-bold",children:"Tanggal Lahir"}),a.jsx("input",{className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",type:"date",name:"tgl_lahir",id:"tgl_lahir",placeholder:"12/02/2004",value:t.tgl_lahir,onChange:o}),a.jsx(i,{className:"w-full",message:n.tgl_lahir})]}),a.jsxs("div",{className:"col-span-2 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"jenis_kelamin",className:"w-full text-xl font-bold",children:"Kelamin"}),a.jsxs("select",{className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",name:"jenis_kelamin",id:"jenis_kelamin",value:t.jenis_kelamin,onChange:o,children:[a.jsx("option",{value:"L",children:"Laki-Laki"}),a.jsx("option",{value:"P",children:"Perempuan"})]}),a.jsx(i,{className:"w-full",message:n.jenis_kelamin})]}),a.jsx("label",{htmlFor:"alamat",className:"col-span-6 text-xl font-bold",children:"Alamat"}),a.jsxs("div",{className:"col-span-6 grid grid-cols-6 gap-2",children:[a.jsx("input",{className:"col-span-6 border-2 border-green-400 rounded-xl text-xl bg-gray-200",type:"text",name:"alamat",id:"alamat",placeholder:"Contoh: Jl. Imam Bonjol No. 30",value:t.alamat,onChange:o}),a.jsx("p",{className:"col-span-6 text-md text-red-500 italic",children:"*Alamat hanya berisikan Jalan, Nomor Rumah ataupun RT RW tanpa Kelurahan hingga Provinsi"})]}),a.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"provinsi",className:"w-full text-xl font-bold",children:"Provinsi"}),a.jsxs("select",{className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",name:"provinsi",id:"provinsi",onChange:e=>{_(e.target.value),N(e.target.value)},children:[a.jsx("option",{value:"",children:"-- Pilih Provinsi --"}),m==null?void 0:m.map(e=>a.jsx("option",{value:e.kode_provinsi,children:e.nama},e.kode_provinsi))]}),a.jsx(i,{className:"w-full",message:n.kabkota})]}),a.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"kabkota",className:"w-full text-xl font-bold",children:"Kab/Kota"}),a.jsxs("select",{className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",name:"kabkota",id:"kabkota",value:t.kabkota,onChange:e=>{o(e,"kecamatan",e.target.value),d(l=>({...l,kabkota:e.target.value}))},children:[a.jsx("option",{value:"",children:"-- Pilih Kota --"}),c==null?void 0:c.map(e=>a.jsx("option",{value:e.kode_kota_kab,children:e.nama},e.kode_kota_kab))]}),a.jsx(i,{className:"w-full",message:n.kabkota})]}),a.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"kecamatan",className:"w-full text-xl font-bold",children:"Kecamatan"}),a.jsxs("select",{className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",name:"kecamatan",id:"kecamatan",value:t.kecamatan,onChange:e=>{o(e,"kelurahan",e.target.value),d(l=>({...l,kecamatan:e.target.value}))},disabled:!c||c.length===0,children:[a.jsx("option",{value:"",children:"-- Pilih Kecamatan --"}),h==null?void 0:h.map(e=>a.jsx("option",{value:e.kode_kecamatan,children:e.nama},e.kode_kecamatan))]}),a.jsx(i,{className:"w-full",message:n.kecamatan})]}),a.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"kelurahan",className:"w-full text-xl font-bold",children:"Kelurahan/Desa"}),a.jsx("input",{type:"text",className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",name:"kelurahan",id:"kelurahan",value:t.kelurahan,onChange:e=>{o(e,"kelurahan",e.target.value),d(l=>({...l,kelurahan:e.target.value}))},disabled:!x||x.length===0}),a.jsx(i,{className:"w-full",message:n.kelurahan})]}),a.jsxs("div",{className:"col-span-3 flex flex-col gap-2",children:[a.jsx("label",{htmlFor:"no_hp",className:"w-full text-xl font-bold",children:"No Whatsapp (WA)"}),a.jsx("input",{className:"w-full border-2 border-green-400 rounded-xl text-xl bg-gray-200",type:"number",name:"no_hp",id:"no_hp",placeholder:"Contoh: 0812****1998",value:t.no_hp,onChange:o}),a.jsx(i,{className:"w-full",message:n.no_hp})]}),a.jsx(L,{className:"col-span-2",text:"Daftar"})]})})]}),k?a.jsx("div",{className:"fixed flex justify-center items-center inset-0 z-50 bg-black/50 min-h-screen w-full",children:a.jsx("div",{className:"w-40 rounded-full animate-spin aspect-square border-4 border-white"})}):null]})})}export{M as default};
